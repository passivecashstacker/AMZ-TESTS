var e=document.getElementById("signUp"),t=document.getElementById("signUpBtn");const a=document.getElementById("signIn");var r=document.getElementById("signInBtn");const n=document.getElementById("container");var l=document.getElementById("fogetPassword_btn");function s(e){return/[^@]+@[^@]+\.[a-zA-Z]{2,}/.test(e)}a.addEventListener("click",async()=>{document.body.parentElement.classList.add("left-panel-active"),document.body.parentElement.classList.remove("right-panel-active")}),e.addEventListener("click",async()=>{document.body.parentElement.classList.remove("left-panel-active"),document.body.parentElement.classList.add("right-panel-active")}),l.addEventListener("click",async()=>{var e=document.querySelector(".sign-in-container #login_email")?.value?.trim();if(""==e)alert("Please Enter Your Email-Address");else if(s(e))try{var t=await chrome.runtime.sendMessage({type:"forgot",email:e});console.log(t),0==t?.isSuccess?alert("Error: "+t.msg):alert("Password reset link sent to your email")}catch(e){alert("Error: "+e)}else alert("Invalid Email Address")}),t.addEventListener("click",e=>{e.preventDefault();e={name:document.querySelector(".sign-up-container #name")?.value?.trim(),email:document.querySelector(".sign-up-container #email")?.value?.trim(),password:document.querySelector(".sign-up-container #password")?.value?.trim()};s(e.email)?e.password.length<8?alert("Password must be at least 8 characters long"):(console.log(e),chrome.runtime.sendMessage({type:"signup",...e},function(e){1==e?.isSuccess?(n.classList.add("right-panel-active"),alert("Please check your email to verify your account"),a.click()):alert("Error : "+e?.msg)})):alert("Invalid Email Address")}),r.addEventListener("click",async e=>{e.preventDefault();var e=document.querySelector(".sign-in-container #login_email")?.value?.trim(),t=document.querySelector(".sign-in-container #login_password")?.value?.trim();if(""==e||""==t)alert("Please fill all the fields");else if(s(e))if(t.length<8)alert("Password must be at least 8 characters long");else{try{var a=await chrome.runtime.sendMessage({type:"login",email:e,password:t});if(console.log(a),0==a?.isSuccess)return void alert("Please check your login details");await chrome.storage.local.set({isLoggedIn:!0,...a}),window.location.href=chrome.runtime.getURL("lib/html/table.html")}catch(e){alert("Error: "+e)}n.classList.remove("right-panel-active")}else alert("Invalid Email Address")}),(async()=>{var e=(await chrome.storage.local.get("isLoggedIn"))["isLoggedIn"];e&&((e=await chrome.runtime.sendMessage({type:"check"}))?.isSuccess?await chrome.storage.local.remove("isLoggedIn"):!1===e?.isSubscribed?window.location.href=chrome.runtime.getURL("lib/html/stripe.html"):(await chrome.storage.local.set({...e}),window.location.href=chrome.runtime.getURL("lib/html/table.html")))})();